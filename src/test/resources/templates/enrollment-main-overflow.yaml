templateId: enrollment-main-overflow
description: Enrollment form main page with first 3 children only
pages:
  - id: page1
    template: templates/acroform-enrollment.pdf
    sections:
      - type: acroform
        mappingGroups:
          # Primary Applicant
          - mappingType: JSONPATH
            mappings:
              PolicyNumber: "$.policyNumber"
              EffectiveDate: "$.effectiveDate"
              PrimaryFirstName: "$.primaryApplicant.firstName"
              PrimaryLastName: "$.primaryApplicant.lastName"
              PrimaryDOB: "$.primaryApplicant.dateOfBirth"
              PrimaryGender: "$.primaryApplicant.gender"
              PrimarySSN: "$.primaryApplicant.ssn"
              PrimaryAddress: "$.primaryApplicant.address.street"
              PrimaryCity: "$.primaryApplicant.address.city"
              PrimaryState: "$.primaryApplicant.address.state"
              PrimaryZip: "$.primaryApplicant.address.zipCode"
              PrimaryPhone: "$.primaryApplicant.phone"
              PrimaryEmail: "$.primaryApplicant.email"
          
          # Spouse (if exists)
          - mappingType: JSONPATH
            mappings:
              SpouseFirstName: "$..applicants[?(@.applicantType=='SPOUSE')].firstName"
              SpouseLastName: "$..applicants[?(@.applicantType=='SPOUSE')].lastName"
              SpouseDOB: "$..applicants[?(@.applicantType=='SPOUSE')].dateOfBirth"
              SpouseGender: "$..applicants[?(@.applicantType=='SPOUSE')].gender"
              SpouseSSN: "$..applicants[?(@.applicantType=='SPOUSE')].ssn"
          
          # First 3 children only (Strategy 3 - Manual Slicing)
          - mappingType: CUSTOM
            functionName: identity
            mappings:
              Child1FirstName: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][0].firstName"
              Child1LastName: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][0].lastName"
              Child1DOB: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][0].dateOfBirth"
              Child1Gender: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][0].gender"
              Child1SSN: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][0].ssn"
              
              Child2FirstName: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][1].firstName"
              Child2LastName: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][1].lastName"
              Child2DOB: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][1].dateOfBirth"
              Child2Gender: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][1].gender"
              Child2SSN: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][1].ssn"
              
              Child3FirstName: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][2].firstName"
              Child3LastName: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][2].lastName"
              Child3DOB: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][2].dateOfBirth"
              Child3Gender: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][2].gender"
              Child3SSN: "jsonpath:$..applicants[?(@.applicantType=='CHILD')][2].ssn"
          
          # Overflow indicator
          - mappingType: CUSTOM
            functionName: identity
            mappings:
              AdditionalChildrenNote: "direct:See attached addendum for additional dependents"
