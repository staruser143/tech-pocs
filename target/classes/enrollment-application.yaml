sections:
  - sectionId: enrollment-form
    type: ACROFORM
    templatePath: templates/forms/applicant-form.pdf
    
    # Multi-group optimization:
    # - JSONATA for filtered/nested fields (clean syntax)
    # - DIRECT for simple top-level fields (faster)
    fieldMappingGroups:
      
      # Group 1: Simple direct fields (fastest ~0.5ms)
      - mappingType: DIRECT
        fields:
          applicationId: applicationId
          applicationDate: applicationDate
          applicationStatus: status
      
      # Group 2: Filtered fields using JSONATA (clean syntax ~2.5ms)
      - mappingType: JSONATA
        fields:
          # ========================================
          # PRIMARY APPLICANT - Demographics
          # ========================================
          primaryFirstName: "applicants[type='PRIMARY'].demographic.firstName"
          primaryLastName: "applicants[type='PRIMARY'].demographic.lastName"
          primaryMiddleName: "applicants[type='PRIMARY'].demographic.middleName"
          primaryDOB: "applicants[type='PRIMARY'].demographic.dateOfBirth"
          primaryGender: "applicants[type='PRIMARY'].demographic.gender"
          primarySSN: "applicants[type='PRIMARY'].demographic.ssn"
          primaryEmail: "applicants[type='PRIMARY'].demographic.email"
          primaryPhone: "applicants[type='PRIMARY'].demographic.phone"
          
          # PRIMARY APPLICANT - Home Address
          primaryHomeStreet: "applicants[type='PRIMARY'].demographic.addresses[type='HOME'].street"
          primaryHomeCity: "applicants[type='PRIMARY'].demographic.addresses[type='HOME'].city"
          primaryHomeState: "applicants[type='PRIMARY'].demographic.addresses[type='HOME'].state"
          primaryHomeZip: "applicants[type='PRIMARY'].demographic.addresses[type='HOME'].zipCode"
          
          # PRIMARY APPLICANT - Billing Address
          primaryBillingStreet: "applicants[type='PRIMARY'].demographic.addresses[type='BILLING'].street"
          primaryBillingCity: "applicants[type='PRIMARY'].demographic.addresses[type='BILLING'].city"
          primaryBillingState: "applicants[type='PRIMARY'].demographic.addresses[type='BILLING'].state"
          primaryBillingZip: "applicants[type='PRIMARY'].demographic.addresses[type='BILLING'].zipCode"
          
          # ========================================
          # SPOUSE APPLICANT (optional)
          # ========================================
          spouseFirstName: "applicants[type='SPOUSE'].demographic.firstName"
          spouseLastName: "applicants[type='SPOUSE'].demographic.lastName"
          spouseDOB: "applicants[type='SPOUSE'].demographic.dateOfBirth"
          spouseGender: "applicants[type='SPOUSE'].demographic.gender"
          spouseSSN: "applicants[type='SPOUSE'].demographic.ssn"
          
          # SPOUSE - Home Address (usually same as primary, but can be different)
          spouseHomeStreet: "applicants[type='SPOUSE'].demographic.addresses[type='HOME'].street"
          spouseHomeCity: "applicants[type='SPOUSE'].demographic.addresses[type='HOME'].city"
          spouseHomeState: "applicants[type='SPOUSE'].demographic.addresses[type='HOME'].state"
          
          # ========================================
          # CHILD APPLICANTS (array indexing)
          # ========================================
          # First child (index 0)
          child1FirstName: "applicants[type='CHILD'][0].demographic.firstName"
          child1LastName: "applicants[type='CHILD'][0].demographic.lastName"
          child1DOB: "applicants[type='CHILD'][0].demographic.dateOfBirth"
          child1Gender: "applicants[type='CHILD'][0].demographic.gender"
          
          # Second child (index 1)
          child2FirstName: "applicants[type='CHILD'][1].demographic.firstName"
          child2LastName: "applicants[type='CHILD'][1].demographic.lastName"
          child2DOB: "applicants[type='CHILD'][1].demographic.dateOfBirth"
          child2Gender: "applicants[type='CHILD'][1].demographic.gender"
          
          # Third child (index 2)
          child3FirstName: "applicants[type='CHILD'][2].demographic.firstName"
          child3LastName: "applicants[type='CHILD'][2].demographic.lastName"
          child3DOB: "applicants[type='CHILD'][2].demographic.dateOfBirth"
          child3Gender: "applicants[type='CHILD'][2].demographic.gender"
          
          # ========================================
          # CALCULATED/AGGREGATE FIELDS
          # ========================================
          # Count total applicants
          totalApplicants: "$count(applicants)"
          
          # Count children
          totalChildren: "$count(applicants[type='CHILD'])"
          
          # Full name formatting
          primaryFullName: "applicants[type='PRIMARY'].demographic.firstName & ' ' & applicants[type='PRIMARY'].demographic.lastName"
          
          # Check if spouse exists
          hasSpouse: "$exists(applicants[type='SPOUSE']) ? 'Yes' : 'No'"
